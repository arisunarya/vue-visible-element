var VueVisibleElement=function(){"use strict";function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],i=!0,r=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done)&&(e.push(s.value),!n||e.length!==n);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}return e}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function e(t,n,e,i,r,o,s,l,c,a){"boolean"!=typeof s&&(c=l,l=s,s=!1);const u="function"==typeof e?e.options:e;let d;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,r&&(u.functional=!0)),i&&(u._scopeId=i),o?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=d):n&&(d=s?function(t){n.call(this,a(t,this.$root.$options.shadowRoot))}:function(t){n.call(this,l(t))}),d)if(u.functional){const t=u.render;u.render=function(n,e){return d.call(e),t(n,e)}}else{const t=u.beforeCreate;u.beforeCreate=t?[].concat(t,d):[d]}return e}var i=e({render:function(){var t=this,n=t.$createElement;return(t._self._c||n)(t.tag,t._g(t._b({tag:"component"},"component",t.$attrs,!1),t.$listeners),[t._t("prepend",null,{scan:t.scan}),t._v(" "),t._t("contain",null,{scan:t.scan}),t._v(" "),t._t("append",null,{scan:t.scan})],2)},staticRenderFns:[]},undefined,{name:"VueVisibleElement",props:{tag:{type:String,default:"div"},mapping:{type:Function,default:function(t){return t}},immediate:{type:Boolean,default:!0},scroll:{type:Boolean,default:!0},scrollable:{type:Boolean,default:!1},throttle:{type:Number,default:200},impression:{type:Number,default:0}},data:function(){return{throttled:function(){},childs:[]}},methods:{scan:function(){var t=this,n=this.$slots.contain;if(n)for(var e=n.filter((function(t){return t.tag})).map(this.mapping),i=function(n){return t.childs.find((function(t){return t.elm===n}))},r=function(t){var n=t.getBoundingClientRect(),e=n.x+n.width/2,i=n.y+n.height/2;return e>=0&&i>=0&&e<=window.innerWidth&&i<=window.innerHeight},o=function(t){var n=t.getBoundingClientRect();return n.x+n.width>=0&&n.y+n.height>=0&&n.x<=window.innerWidth&&n.y<=window.innerHeight},s=function(n){var e=n.getBoundingClientRect(),i=t.$el.getBoundingClientRect(),r=e.x-i.x+e.width/2,o=e.y-i.y+e.height/2;return r>=0&&o>=0&&r<=i.width&&o<=i.height},l=function(n){var e=n.getBoundingClientRect(),i=t.$el.getBoundingClientRect();return e.x-i.x+e.width>=0&&e.y-i.y+e.height>=0&&e.x-i.x<=i.width&&e.y-i.y<=i.height},c=function(t){return s(t)&&r(t)},a=function(n){var a=e[n].elm;i(a)||function(n){t.childs.push({visible:!1,onScreen:!1,onCanvas:!1,elm:n})}(a);var u=i(a),d={index:n,elm:a};!function(t){return l(t)&&o(t)}(a)&&u.visible?(u.visible=!1,t.$emit("invisible",d)):c(a)&&!u.visible&&setTimeout((function(){(0===t.impression||c(a)&&!u.visible)&&(u.visible=!0,t.$emit("visible",d))}),t.impression),!l(a)&&u.onCanvas?(u.onCanvas=!1,t.$emit("offcanvas",d)):s(a)&&!u.onCanvas&&setTimeout((function(){(0===t.impression||s(a)&&!u.onCanvas)&&(u.onCanvas=!0,t.$emit("oncanvas",d))}),t.impression),!o(a)&&u.onScreen?(u.onScreen=!1,t.$emit("offscreen",d)):r(a)&&!u.onScreen&&setTimeout((function(){(0===t.impression||r(a)&&!u.onScreen)&&(u.onScreen=!0,t.$emit("onscreen",d))}),t.impression)},u=0;u<e.length;u++)a(u)},reset:function(){return this.childs=[],this.$emit("reset"),this.scan},rescan:function(){this.reset(),this.scan()},addScrollEvent:function(t){t.addEventListener("scroll",this.throttled)},removeScrollEvent:function(t){t.addEventListener("scroll",this.throttled)},throttleFn:function(t,n){var e=!1;return function(){e||(t.apply(this,arguments),e=!0,setTimeout((function(){e=!1}),n))}}},watch:{scroll:{immediate:!0,handler:function(t){var n=this;this.$nextTick((function(){"undefined"!=typeof window&&(t?n.addScrollEvent(window):n.removeScrollEvent(window))}))}},scrollable:{immediate:!0,handler:function(t){var n=this;this.$nextTick((function(){"undefined"!=typeof window&&(t?n.addScrollEvent(n.$el):n.removeScrollEvent(n.$el))}))}}},mounted:function(){this.throttled=this.throttleFn(this.scan,this.throttle),this.immediate&&this.throttled()},beforeDestroy:function(){this.scroll&&this.removeScrollEvent(window),this.scrollable&&this.removeScrollEvent(this.$el)}},undefined,false,"data-v-79341b04",!1,void 0,void 0,void 0),r=function(){var t=i;return t.install=function(n){n.component("VueVisibleElement",t)},t}(),o=Object.freeze({__proto__:null,default:r});return Object.entries(o).forEach((function(n){var e=t(n,2),i=e[0],o=e[1];"default"!==i&&(r[i]=o)})),r}();