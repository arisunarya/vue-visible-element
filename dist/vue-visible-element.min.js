var VueVisibleElement=function(){"use strict";function t(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}return n}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t,e,n,i,r,o,s,l,a,c){"boolean"!=typeof s&&(a=l,l=s,s=!1);const u="function"==typeof n?n.options:n;let d;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,r&&(u.functional=!0)),i&&(u._scopeId=i),o?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,a(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=d):e&&(d=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,l(t))}),d)if(u.functional){const t=u.render;u.render=function(e,n){return d.call(n),t(e,n)}}else{const t=u.beforeCreate;u.beforeCreate=t?[].concat(t,d):[d]}return n}var i=n({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.tag,t._g(t._b({tag:"component"},"component",t.$attrs,!1),t.$listeners),[t._t("prepend",null,{scan:t.scan}),t._v(" "),t._t("contain",null,{scan:t.scan}),t._v(" "),t._t("append",null,{scan:t.scan})],2)},staticRenderFns:[]},undefined,{name:"VueVisibleElement",props:{tag:{type:String,default:"div"},mapping:{type:Function,default:function(t){return t}},immediate:{type:Boolean,default:!0},scroll:{type:Boolean,default:!0},scrollable:{type:Boolean,default:!1},throttle:{type:Number,default:500}},data:function(){return{throttled:function(){},childs:[]}},methods:{scan:function(){var t=this,e=this.$slots.contain;if(e)for(var n=e.filter((function(t){return t.tag})).map(this.mapping),i=function(e){return t.childs.find((function(t){return t.elm===e}))},r=function(e){return t.childs.push({visible:!1,onScreen:!1,onCanvas:!1,elm:e})},o=0;o<n.length;o++){var s=n[o].elm;i(s)||r(s);var l=i(s),a={index:o,elm:s},c=s.getBoundingClientRect(),u=c.x+c.width/2,d=c.y+c.height/2,h=this.$el.getBoundingClientRect(),f=c.x-h.x+c.width/2,v=c.y-h.y+c.height/2,m=u>=0&&d>=0&&u<=window.innerWidth&&d<=window.innerHeight,p=c.x+c.width>=0&&c.y+c.height>=0&&c.x<=window.innerWidth&&c.y<=window.innerHeight,y=f>=0&&v>=0&&f<=h.width&&v<=h.height,b=c.x-h.x+c.width>=0&&c.y-h.y+c.height>=0&&c.x-h.x<=h.width&&c.y-h.y<=h.height,g=y&&m;!(b&&p)&&l.visible?(l.visible=!1,this.$emit("invisible",a)):g&&!l.visible&&(l.visible=!0,this.$emit("visible",a)),!b&&l.onCanvas?(l.onCanvas=!1,this.$emit("offcanvas",a)):y&&!l.onCanvas&&(l.onCanvas=!0,this.$emit("oncanvas",a)),!p&&l.onScreen?(l.onScreen=!1,this.$emit("offscreen",a)):m&&!l.onScreen&&(l.onScreen=!0,this.$emit("onscreen",a))}},reset:function(){return this.childs=[],this.$emit("reset"),this.scan},rescan:function(){this.reset(),this.scan()},addScrollEvent:function(t){t.addEventListener("scroll",this.throttled)},removeScrollEvent:function(t){t.addEventListener("scroll",this.throttled)},throttleFn:function(t,e){var n=!1;return function(){n||(t.apply(this,arguments),n=!0,setTimeout((function(){n=!1}),e))}}},watch:{scroll:{immediate:!0,handler:function(t){var e=this;this.$nextTick((function(){"undefined"!=typeof window&&(t?e.addScrollEvent(window):e.removeScrollEvent(window))}))}},scrollable:{immediate:!0,handler:function(t){var e=this;this.$nextTick((function(){"undefined"!=typeof window&&(t?e.addScrollEvent(e.$el):e.removeScrollEvent(e.$el))}))}}},mounted:function(){this.throttled=this.throttleFn(this.scan,this.throttle),this.immediate&&this.scan()},beforeDestroy:function(){this.scroll&&this.removeScrollEvent(window),this.scrollable&&this.removeScrollEvent(this.$el)}},undefined,false,"data-v-4b7bcffa",!1,void 0,void 0,void 0),r=function(){var t=i;return t.install=function(e){e.component("VueVisibleElement",t)},t}(),o=Object.freeze({__proto__:null,default:r});return Object.entries(o).forEach((function(e){var n=t(e,2),i=n[0],o=n[1];"default"!==i&&(r[i]=o)})),r}();